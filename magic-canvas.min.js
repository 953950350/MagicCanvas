jQuery.magicCanvas={draw:function(a){function b(){r=document.getElementById("reactive-bg-canvas"),p=$(window).width(),q=$(window).height(),r.style.position="fixed",r.style.zIndex=-99999,r.style.top="0px",r.style.left="0px",r.width=p,r.height=q,u={x:p/2,y:q/2},s=r.getContext("2d"),n()}function c(){"ontouchstart"in window||window.addEventListener("mousemove",d),window.addEventListener("resize",e)}function d(a){u.x=a.pageX,u.y=a.pageY}function e(){p=window.innerWidth,q=window.innerHeight,r.width=p,r.height=q}function f(){g(),setInterval(h,y.heartBeatCD)}function g(){s.clearRect(0,0,p,q);for(var a=0;a<w.length;a++){var b=w[a];b.circle.active>0&&(b.circle.active-=.012,b.circle.draw())}requestAnimationFrame(g)}function h(){var a=i(),b=new l(a,0),c=.8*y.heartBeatCD,d=60*c/1e3,e=y.heartBeatRange/d,f=c/d,g=.8,h={x:u.x,y:u.y};w=[];var j=function(){if(b.radius<y.heartBeatRange){for(var a=0;a<t.length;a++){var c=t[a];if(m(c,b.pos)<Math.pow(b.radius,2))for(var d=0;d<c.closest.length;d++){var i=c.closest[d],n=k(c,i,b);void 0!=n&&(n.circle=new l(n,1.2,h),n.circle.active=g,g*=.999,w.push(n))}}setTimeout(j,f),b.radius+=e}};v&&j()}function i(){for(var a={x:-100,y:-100},b=0;b<t.length;b++){var c=t[b];a=m(u,c)<m(u,a)?c:a}return a}function j(a,b){var c=y.lineLen*Math.sin(60*Math.PI/180),d=y.lineLen*Math.cos(60*Math.PI/180),e={closest:[]};return"left"==b||"right"==b?(e.x=a.x+y.lineLen*("left"==b?-1:1),e.y=a.y):"rightTop"==b||"rightBottom"==b?(e.x=a.x+d,e.y=a.y+c*("rightTop"==b?-1:1)):("leftTop"==b||"leftBottom"==b)&&(e.x=a.x-d,e.y=a.y+c*("leftTop"==b?-1:1)),e.type=b,a.closest.push(e),e.closest.push(a),e}function k(a,b,c){var d=m(a,c.pos),e=m(b,c.pos),f=Math.sqrt(Math.max(d,e)),g=Math.sqrt(Math.min(d,e));if(g<c.radius&&f>c.radius){var h=(a.y-b.y)/(a.x-b.x),i=a.y-h*a.x,j=-c.pos.x,k=-c.pos.y,l=c.radius,n=(Math.pow(h,2)+1)*Math.pow(l,2)-Math.pow(j*h,2)+2*(j*k+i*j)*h-Math.pow(k+i,2),o=(-1*Math.sqrt(n)-h*(k+i)-j)/(Math.pow(h,2)+1),p=(Math.sqrt(n)-h*(k+i)-j)/(Math.pow(h,2)+1),q=o<Math.max(a.x,b.x)&&o>Math.min(a.x,b.x)?o:p,r=h*q+i;return{x:q,y:r}}}function l(a,b,c){this.pos=a||null,this.radius=b||null,this.centerP=c||a,this.draw=function(){if(this.active){s.beginPath(),s.arc(this.pos.x,this.pos.y,this.radius,0,2*Math.PI,!1);var b="function"==typeof y.rgb?y.rgb(a,c):y.rgb;b="".concat(b.r).concat(",").concat(b.g).concat(",").concat(b.b),s.fillStyle="rgba("+b+","+this.active+")",s.fill()}}}function m(a,b){return Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2)}function n(){var a={x:p/2,y:q/2,closest:[]},b=[j(a,"left"),j(a,"rightTop"),j(a,"rightBottom")];for(t=[a];b.length>0;){var c=b.pop();if(0<c.x&&c.x<p&&0<c.y&&c.y<q){for(var d=!1,e=0;e<t.length;e++){var f=t[e],g=m(c,f);if(g<.1*Math.pow(y.lineLen,2)){d=!0;break}}if(!d){t.push(c);var h=c.type;"leftTop"==h||"leftBottom"==h?(b.unshift(j(c,"left")),b.unshift(j(c,"leftTop"==h?"rightTop":"rightBottom"))):"rightTop"==h||"rightBottom"==h?(b.unshift(j(c,"right")),b.unshift(j(c,"rightTop"==h?"leftTop":"leftBottom"))):"left"==h?(b.unshift(j(c,"leftBottom")),b.unshift(j(c,"leftTop"))):"right"==h&&(b.unshift(j(c,"rightBottom")),b.unshift(j(c,"rightTop")))}}}for(var e=0;e<t.length;e++)t[e].circle=new l(t[e],2)}function o(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}o();var p,q,r,s,t,u,v=!0,w=[],x={lineLen:30,heartBeatCD:3e3,heartBeatRange:300,rgb:{r:156,g:217,b:249}},y=$.extend(x,a);$(document).mouseenter(function(){v=!0}),$(document).mouseleave(function(){v=!1}),b(),f(),c()}};